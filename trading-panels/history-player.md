---
description: >-
  Рыночный повтор (или Повтор истории) позволяет вам тестировать стратегии на
  любых торговых инструментах с любым поставщиком данных или брокером.
---

# Рыночный повтор

* ****[**Что такое рыночный повтор**](history-player.md#chto-takoe-rynochnyi-povtor)****
* ****[**Первый запуск Рыночного повтора**](history-player.md#pervyi-zapusk-rynochnogo-povtora)****
* ****[**Общие настройки инструментов**](history-player.md#obshie-nastroiki-instrumentov)****

## Что такое рыночный повтор

Тестирование торговых стратегий - один из важнейших и необходимых шагов для успешной торговли. Если вы опытный алгоритмический трейдер, то метод автоматического тестирования идеален, и вы можете использовать наше [Расширение для Visual Studio.](https://help.quantower.com.ru/quantower-algo/installing-visual-studio) Но, к сожалению, многие трейдеры не знают языка программирования, что затрудняет тестирование их стратегий.

Поэтому Quantower предоставляет панель **Рыночный повтор** (или Повтор истории) для простого ручного тестирования любой торговой стратегии.

![Процесс тестирования с панелью Рыночный повтор](../.gitbook/assets/history-player.png)

Повтор истории позволяет вам тестировать на любых торговых инструментах с любым поставщиком или брокером. Это особенно полезно, когда у вас есть доступ к потоку данных, который не позволяет выполнять заказы (каналы даты котировок, такие как IQFeed или криптобиржа).

{% embed url="https://www.youtube.com/watch?v=za-eE8ZSmV8" %}
Как протестировать торговую стратегию на истории с панелью рыночный повтор
{% endembed %}

## Первый запуск Рыночного повтора

* **Запустите панель** **Рыночный повтор** из главного меню приложения
* Добавьте торговый инструмент для тестирования
* Установите тип данных - Тик, 1 минута, 1 день
* Установите тип исполнения - Last или Bid / Ask / Last
* Нажмите кнопку **«Пуск»**, чтобы начать тестирование.

В нашем блоге мы подробно показали [процесс ручного тестирования торговых стратегий с помощью панели Market Replay.](https://www.quantower.com/blog/software-for-manual-backtesting-a-brief-review-of-history-player-plugin)

![](../.gitbook/assets/menyu-rynochnyi-povtor.png)

![](../.gitbook/assets/obshii-vid-rynochnogo-povtora-s-osnovnymi-nastroikami.png)

{% hint style="warning" %}
Если вы нажмете кнопку «Стоп», весь процесс тестирования будет отменен.
{% endhint %}

После запуска тестирования вы можете открыть все необходимые панели для тестирования, нажав кнопку «Открыть панель».

![](../.gitbook/assets/vizualizaciya-povtora.gif)

## Общие настройки инструментов

Перед тем, как начать тестирование стратегии, вам необходимо настроить начальный торговый баланс, схему имитации (или моделирования) для загружаемых данных, размер комиссии для торгового инструмента и тип неттинга.

![](../.gitbook/assets/skhema-modelirovaniya.png)

Тестирование стратегии может выполняться по одной из трех схем на выбор:

* **OHLC -** в этом режиме последовательность строится только по ценам OHLC минутных баров, количество генерированных контрольных точек значительно сокращается - отсюда и время тестирования.
* **По ценам открытия**- в этом режиме все сделки открываются по цене открытия следующего бара. Этот режим хорошо подходит для тестирования стратегий, которые обрабатывают сделки только при открытии бара и не используют отложенные ордера, а также ордера StopLoss и TakeProfit.
* **По ценам закрытия**- в этом режиме все сделки открываются по цене закрытия текущего бара.

{% hint style="info" %}
Режимы «**По ценам открытия**» и «**По ценам закрытия**»» имеют самое быстрое время тестирования, но они подходят не для всех торговых стратегий. Выберите желаемый режим тестирования исходя из характеристик торговой системы.
{% endhint %}

Теперь рассмотрим основные настройки выбранного торгового инструмента.

![](../.gitbook/assets/tip-nettinga.png)

В разделе Тип неттинга вы можете выбрать метод суммирования существующих и новых позиций:

* **Одна позиция **- в этом режиме можно открыть одну позицию по одному инструменту в одном направлении. Если вы ранее открывали позицию на покупку 1 лота, добавление позиции на продажу 1 лота закроет предыдущую позицию. Новые сделки на покупку будут суммироваться по объему, а цена входа будет усреднена.

![Позиции перекрываются типом взаимозачета, который называется «Одна позиция».](../.gitbook/assets/orders-matching-mode-one-position.gif)

* **несколько с одной стороны** - этот режим позволяет открывать много разных позиций в одном направлении. Например, открывая несколько позиций в последовательности, они будут открываться отдельно. Противоположные сделки (на продажу) закроют их.

![Позиции перекрываются типом взаимозачета под названием "Несколько на сторону".](../.gitbook/assets/orders-matching-mode-multiple-per-side.gif)

* **Несколько позиций** - каждая новая сделка будет открываться как отдельный элемент, включая противоположные сделки.

![Позиции перекрываются типом взаимозачета, который называется "Множественная позиция".](../.gitbook/assets/orders-matching-mode-multiple-positions.gif)
